parameters:
  - name: configuration
    type: string

steps:
  - template: checkout.yml

  - script: |
      sudo wget -qO /usr/local/bin/ninja.gz https://github.com/ninja-build/ninja/releases/latest/download/ninja-linux.zip
      sudo gunzip /usr/local/bin/ninja.gz
      sudo chmod a+x /usr/local/bin/ninja
    displayName: 'Install ninja'

  - script: |
      chmod +x ./Utilities/LinuxBuildScripts/libHttpClient_Linux.bash
      sudo sed -i -e 's/\r$//' ./Utilities/LinuxBuildScripts/libHttpClient_Linux.bash
      sudo bash ./Utilities/LinuxBuildScripts/libHttpClient_Linux.bash -c ${{ parameters.configuration }}
    displayName: 'build LibHC'